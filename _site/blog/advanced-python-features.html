<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Mike Liao

	Journal Theme by https://jekyllthemes.io
	Premium + free Jekyll themes for your blog or website.

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/favicon.png">
	<title>Advanced Python Features – Mike Liao</title>
	<meta name="description" content="">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Advanced Python Features – Mike Liao">
	<meta name="twitter:description" content="">
	<meta name="twitter:image:src" content="http://localhost:4000/images/demo/demo-portrait.jpg">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Advanced Python Features – Mike Liao" />
	<meta property="og:description" content="" />
	<meta property="og:image" content="http://localhost:4000/images/demo/demo-portrait.jpg" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Merriweather:300,400|Muli:400,400i,600" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>


	<!-- Latex -->
	<script type="text/x-mathjax-config">
	MathJax.Hub.Config({
		tex2jax: {
			inlineMath: [['$','$'], ['\\(','\\)']],
			processEscapes: true
		}
	});
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

	

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	
	
</head>


<body class="loading" data-site-url="http://localhost:4000" data-page-url="/blog/advanced-python-features">


	<header class="header">

	<div class="header-image header-image--on" style="background-image: url(/images/demo/demo-portrait.jpg);"></div>
	<div class="header-image"></div>

	<div class="header-overlay"></div>

	<div class="header__content">

		
		<a href="/" class="header__title">
			Mike Liao
		</a>
		

		<p class="header__tagline">4th Year Student at UC Berkeley</p>

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/" class="menu__list__item__link">Latest</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/projects/" class="menu__list__item__link">Projects</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/contact" class="menu__list__item__link">Contact</a>
					</li>
					
				</ul>
				<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</ul>
			</div>
		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="Advanced Python Features – Mike Liao" data-image="/images/demo/demo-portrait.jpg">

			<section class="intro">

	<div class="wrap">

		<h1>Advanced Python Features</h1>
		<p>18 February 2019</p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<p>Recently, I’m been using Python alot, so I wanted to explore the advanced python features. Here are some things about Python that I learned. 
I read a bunch of blog posts as well as Fluent Python. Here are my summarized findings.</p>

<h2 id="1-packing-and-unpacking">1. Packing and Unpacking</h2>
<p>If you are your arguments in a list or a dictionary, you can the unpacking operators * and ** to pass the arguments. This turns out to be very useful because you can create very flexible functions. Below is an example of a function outputting html based on a variety of inputs.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">tag</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">content</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">cls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
          <span class="n">attrs</span><span class="p">[</span><span class="s">'class'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cls</span>
      <span class="k">if</span> <span class="n">attrs</span><span class="p">:</span>
          <span class="n">attr_str</span> <span class="o">=</span> <span class="s">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">' </span><span class="si">%</span><span class="s">s="</span><span class="si">%</span><span class="s">s"'</span> <span class="o">%</span> <span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                            <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span>
                            <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">attrs</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="n">attr_str</span> <span class="o">=</span> <span class="s">''</span>
      
      <span class="k">if</span> <span class="n">content</span><span class="p">:</span>
          <span class="k">return</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">'&lt;</span><span class="si">%</span><span class="s">s</span><span class="si">%</span><span class="s">s&gt;</span><span class="si">%</span><span class="s">s&lt;/</span><span class="si">%</span><span class="s">s&gt;'</span> <span class="o">%</span>
                          <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attr_str</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">content</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="k">return</span> <span class="s">'&lt;</span><span class="si">%</span><span class="s">s</span><span class="si">%</span><span class="s">s /&gt;'</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attr_str</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">tag</span><span class="p">(</span><span class="s">'br'</span><span class="p">)</span>   
<span class="s">'&lt;br /&gt;'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tag</span><span class="p">(</span><span class="s">'p'</span><span class="p">,</span> <span class="s">'hello'</span><span class="p">)</span>   
<span class="s">'&lt;p&gt;hello&lt;/p&gt;'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">tag</span><span class="p">(</span><span class="s">'p'</span><span class="p">,</span> <span class="s">'hello'</span><span class="p">,</span> <span class="s">'world'</span><span class="p">))</span>
<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">hello</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">world</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tag</span><span class="p">(</span><span class="s">'p'</span><span class="p">,</span> <span class="s">'hello'</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">33</span><span class="p">)</span>   
<span class="o">&lt;</span><span class="n">p</span> <span class="nb">id</span><span class="o">=</span><span class="s">"33"</span><span class="o">&gt;</span><span class="n">hello</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">tag</span><span class="p">(</span><span class="s">'p'</span><span class="p">,</span> <span class="s">'hello'</span><span class="p">,</span> <span class="s">'world'</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="s">'sidebar'</span><span class="p">))</span>   
<span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s">"sidebar"</span><span class="o">&gt;</span><span class="n">hello</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s">"sidebar"</span><span class="o">&gt;</span><span class="n">world</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tag</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="s">'testing'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">"img"</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">img</span> <span class="n">content</span><span class="o">=</span><span class="s">"testing"</span> <span class="o">/&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">my_tag</span> <span class="o">=</span> <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'img'</span><span class="p">,</span> <span class="s">'title'</span><span class="p">:</span> <span class="s">'Sunset Boulevard'</span><span class="p">,</span>
              <span class="s">'src'</span><span class="p">:</span> <span class="s">'sunset.jpg'</span><span class="p">,</span> <span class="s">'cls'</span><span class="p">:</span> <span class="s">'framed'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tag</span><span class="p">(</span><span class="o">**</span><span class="n">my_tag</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">img</span> <span class="n">class</span><span class="o">=</span><span class="s">"framed"</span> <span class="n">src</span><span class="o">=</span><span class="s">"sunset.jpg"</span> <span class="n">title</span><span class="o">=</span><span class="s">"Sunset Boulevard"</span> <span class="o">/&gt;</span>

<span class="n">Excerpt</span> <span class="n">From</span><span class="p">:</span> <span class="n">Luciano</span> <span class="n">Ramalho</span><span class="o">.</span> <span class="n">Fluent</span> <span class="n">Python</span><span class="o">.</span> <span class="n">Apple</span> <span class="n">Books</span><span class="o">.</span> </code></pre></figure>

<h2 id="2-decorators">2. Decorators</h2>
<p>A decorator is a function which takes a function as a parameter and returns a function. A practical example of a decorator is a cache to for certain inputs.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python">  <span class="k">def</span> <span class="nf">cache</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
      <span class="n">cached_values</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Contains already computed values
</span>      <span class="k">def</span> <span class="nf">wrapping_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
          <span class="k">if</span> <span class="n">args</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cached_values</span><span class="p">:</span>
              <span class="c1"># Call the function only if we haven't already done it for those parameters
</span>              <span class="n">cached_values</span><span class="p">[</span><span class="n">args</span><span class="p">]</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
          <span class="k">return</span> <span class="n">cached_values</span><span class="p">[</span><span class="n">args</span><span class="p">]</span>
      <span class="k">return</span> <span class="n">wrapping_function</span>

  <span class="o">@</span><span class="n">cache</span>
  <span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
      <span class="k">print</span><span class="p">(</span><span class="s">'calling fibonacci(</span><span class="si">%</span><span class="s">d)'</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
          <span class="k">return</span> <span class="n">n</span>
      <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>

  <span class="k">print</span><span class="p">([</span><span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">)])</span></code></pre></figure>

<h2 id="3-functools">3. Functools</h2>
<p><strong>Functools</strong> provides a few decorators such as a <strong>lru_cache</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python">  <span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">lru_cache</span>

  <span class="o">@</span><span class="n">lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
      <span class="k">print</span><span class="p">(</span><span class="s">'calling fibonacci(</span><span class="si">%</span><span class="s">d)'</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
          <span class="k">return</span> <span class="n">n</span>
      <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>

  <span class="k">print</span><span class="p">([</span><span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">)])</span></code></pre></figure>

<h2 id="4-searching-with-bisect-and-insort">4. Searching with Bisect and Insort</h2>
<p>The <strong>bisect</strong> module offers two main functions—<strong>bisect</strong> and <strong>insort</strong>—that use the binary search algorithm to quickly find and insert items in any sorted sequence.”
A good example in the book. For example, if you had a list of scores and wanted to assign letter grades, how would you do it? A good way is to define a list of ranges and use binary sort to check if a score is within that set.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">grade</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">breakpoints</span><span class="o">=</span><span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">grades</span><span class="o">=</span><span class="s">'FDCBA'</span><span class="p">):</span>
<span class="o">...</span>     <span class="n">i</span> <span class="o">=</span> <span class="n">bisect</span><span class="o">.</span><span class="n">bisect</span><span class="p">(</span><span class="n">breakpoints</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>
<span class="o">...</span>     <span class="k">return</span> <span class="n">grades</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">grade</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="k">for</span> <span class="n">score</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">33</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">]]</span>
<span class="p">[</span><span class="s">'F'</span><span class="p">,</span> <span class="s">'A'</span><span class="p">,</span> <span class="s">'C'</span><span class="p">,</span> <span class="s">'C'</span><span class="p">,</span> <span class="s">'B'</span><span class="p">,</span> <span class="s">'A'</span><span class="p">,</span> <span class="s">'A'</span><span class="p">]</span>

<span class="n">Excerpt</span> <span class="n">From</span><span class="p">:</span> <span class="n">Luciano</span> <span class="n">Ramalho</span><span class="o">.</span> <span class="n">Fluent</span> <span class="n">Python</span><span class="o">.</span> <span class="n">Apple</span> <span class="n">Books</span><span class="o">.</span> </code></pre></figure>

<p>Sorting is expensive, so the <strong>insort</strong> module is used to insert a element in sorted order.</p>

<h2 id="5-use-arrays-instead-of-lists-when-the-list-is-large">5. Use arrays instead of lists when the list is large</h2>
<p>For very large data like a list of 10 million floats, an <strong>array</strong> might be a better choice. The difference between a <strong>list</strong> and an <strong>array</strong> is that <strong>list</strong> will hold 10 million <strong>float objects</strong> while arrays will only hold values like in a C array(and not the whole object).</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">array</span> <span class="kn">import</span> <span class="n">array</span>  
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">floats</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s">'d'</span><span class="p">,</span> <span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">7</span><span class="p">)))</span> <span class="err">”</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">floats</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
<span class="mf">0.07802343889111107</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'floats.bin'</span><span class="p">,</span> <span class="s">'wb'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">floats</span><span class="o">.</span><span class="n">tofile</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>  
<span class="o">&gt;&gt;&gt;</span> <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">floats2</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s">'d'</span><span class="p">)</span>  
<span class="o">&gt;&gt;&gt;</span> <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'floats.bin'</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">floats2</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">7</span><span class="p">)</span>  
<span class="o">&gt;&gt;&gt;</span> <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">floats2</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
<span class="mf">0.07802343889111107</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">floats2</span> <span class="o">==</span> <span class="n">floats</span>  
<span class="bp">True</span><span class="err">”</span>
<span class="n">Excerpt</span> <span class="n">From</span><span class="p">:</span> <span class="n">Luciano</span> <span class="n">Ramalho</span><span class="o">.</span> <span class="err">“</span><span class="n">Fluent</span> <span class="n">Python</span><span class="o">.</span><span class="err">”</span> <span class="n">Apple</span> <span class="n">Books</span><span class="o">.</span> </code></pre></figure>

<p>This is an example of creating, saving, and loading a large number of floats. In this case, loading with <strong>array.fromfile</strong> is ~60x faster than using <strong>open</strong>. Saving with <strong>array.tofile</strong> is ~7x faster than traditionally writing one number to a file at a time.</p>

<h2 id="6-dicts">6. Dicts</h2>
<p>Python contains many implementation of dict, but need to import <em>collections</em>:</p>
<ol>
  <li>dict (regular)</li>
  <li>DefaultDict (default value)</li>
  <li>OrdereDict (ordered keys)</li>
  <li>ChainMap (many dicts that are searched in order)</li>
  <li>MappingProxyType (can be used to create immutable map)</li>
</ol>

<p>Personally, I find the MappingProxyType very interesting. <strong>To create secure code and to share data across teams, you might want to create a dictionary that can’t be modified.</strong> This is an example of hwo to do so.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">MappingProxyType</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s">'A'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d_proxy</span> <span class="o">=</span> <span class="n">MappingProxyType</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d_proxy</span>
<span class="n">mappingproxy</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="s">'A'</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d_proxy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  
<span class="s">'A'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d_proxy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s">'x'</span>  
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">TypeError</span><span class="p">:</span> <span class="s">'mappingproxy'</span> <span class="nb">object</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">support</span> <span class="n">item</span> <span class="n">assignment</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s">'B'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d_proxy</span>  
<span class="n">mappingproxy</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="s">'A'</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s">'B'</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d_proxy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="s">'B'</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="n">Excerpt</span> <span class="n">From</span><span class="p">:</span> <span class="n">Luciano</span> <span class="n">Ramalho</span><span class="o">.</span> <span class="n">Fluent</span> <span class="n">Python</span><span class="o">.</span> <span class="n">Apple</span> <span class="n">Books</span><span class="o">.</span> </code></pre></figure>

<p>Dictionary comprehension is the same thing as list comprehension</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">items</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s">'one'</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">'two'</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">'three'</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dict_items</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
<span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s">'one'</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s">'two'</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s">'three'</span><span class="p">}</span></code></pre></figure>

<h2 id="7-sets">7. Sets</h2>
<p><em>Sets</em> and <em>Frozensets</em> are implemented with hash tables under the hood.</p>

<h3 id="why-cant-we-add-to-setsdicts-while-iterating-through">Why can’t we add to sets/dicts while iterating through?</h3>
<p>When you add to sets/dict while iterating, the Python interpreter might
decide that the underlying hash table needs to grow. This entails creating a new hash table where the order of the keys are different. Thus, when you iterate, you might not see all the elements.</p>

<h2 id="8-texts-vs-bytes">8. Texts vs Bytes</h2>
<p>One thing I was not aware of was how many different types of encoding there were for python. Most python programmers use ASCII, or utf-8. However, there are many types of encoding such as:</p>
<h4 id="1-gb2312">1. gb2312</h4>
<p>Used to encode the simplified Chinese ideographs used in mainland China; one of several widely deployed multibyte encodings for Asian languages.</p>
<h4 id="2-cp1252">2. cp1252</h4>
<p>A latin1 superset by Microsoft, adding useful symbols like curly quotes and the € (euro); some Windows apps call it “ANSI,” but it was never a real ANSI standard.</p>

<p>There are many more encodings for different countries (Russia, South America) and different types of computers (Windows, IBM), but mostly I don’t care enough so I skipped it.</p>

<h2 id="8-function-annotations">8. Function Annotations</h2>
<p>Python is not a statically typed language, but Python3 introduces Function Annotations which provide “hints” for what the function is suppose to do. These “hints” do not raise errors, so it is still up to the user to validate the inputs however :(</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">baz</span><span class="p">:</span><span class="s">'int&gt;0'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
  <span class="n">new_str</span> <span class="o">=</span> <span class="n">bar</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">baz</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">new_str</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">foo</span><span class="o">.</span><span class="n">__annotations__</span>
<span class="p">{</span><span class="s">'bar'</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="s">'baz'</span><span class="p">:</span> <span class="s">'int &gt;0'</span><span class="p">,</span> <span class="s">'return'</span><span class="p">:</span> <span class="nb">str</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">foo</span><span class="p">(</span><span class="s">"two"</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="s">'two2'</span></code></pre></figure>

<h2 id="modern-pythonistic-way-for-map-reduce-filter">Modern Pythonistic Way for map, reduce, filter</h2>


	</div>

</section>

		</div>

	</div>


	<footer class="footer">

	<div class="footer__copyright">
		<span>© 2019 Mike Liao</span>
		<a href="https://jekyllthemes.io" target="_blank">Jekyll Themes</a>
	</div>

</footer>


	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/journal-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>